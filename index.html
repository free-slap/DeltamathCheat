<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DeltaMath Analyzer</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #f4f4f4; }
    textarea { width: 100%; height: 200px; }
    pre { background: #fff; padding: 1rem; overflow-x: auto; white-space: pre-wrap; }
    .section { background: #fff; padding: 1rem; margin-top: 1rem; border-radius: 5px; }
    button { padding: 0.5rem 1rem; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>DeltaMath Report Viewer</h1>
  <p>Paste your copied JSON report below:</p>
  <textarea id="jsonInput" placeholder="Paste your report JSON here..."></textarea>
  <br>
  <button onclick="parseReport()">Parse Report</button>

  <div id="output"></div>

  <script>
    function parseReport() {
      const raw = document.getElementById("jsonInput").value;
      const output = document.getElementById("output");
      output.innerHTML = "";

      try {
        const data = JSON.parse(raw);

        output.innerHTML += `<div class="section"><strong>URL:</strong> ${data.url}</div>`;
        output.innerHTML += `<div class="section"><strong>Timestamp:</strong> ${data.timestamp}</div>`;
        
        // Questions
        output.innerHTML += `<div class="section"><h3>Questions</h3><ul>${
          data.questions.length ? data.questions.map(q => `<li>${q.text}</li>`).join("") : "<li>None found</li>"
        }</ul></div>`;

        // Inputs
        output.innerHTML += `<div class="section"><h3>Inputs</h3><ul>${
          data.inputs.map(i => `<li>ID: ${i.id}, Type: ${i.type}, Value: "${i.value}"</li>`).join("")
        }</ul></div>`;

        // Accessibility Warnings
        output.innerHTML += `<div class="section"><h3>Accessibility Warnings</h3><ul>${
          data.accessibilityWarnings.length
            ? data.accessibilityWarnings.map(w => `<li><code>${w.outerHTML}</code></li>`).join("")
            : "<li>None</li>"
        }</ul></div>`;

      } catch (e) {
        output.innerHTML = `<div class="section" style="color:red;">Invalid JSON: ${e.message}</div>`;
      }
    }
  </script>
</body>
</html>

